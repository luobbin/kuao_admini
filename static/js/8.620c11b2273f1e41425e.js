webpackJsonp([8],{"+51r":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"createForm",components:{ItemDetail:a("VNF6").a}},i={render:function(){var t=this.$createElement;return(this._self._c||t)("item-detail",{attrs:{"is-edit":!1}})},staticRenderFns:[]},o=a("VU/8")(n,i,!1,null,null,null);e.default=o.exports},"3KJw":function(t,e,a){var n=a("5n9i");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("b878c386",n,!0)},"5n9i":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'\n.upload-container[data-v-45f4a5d9] {\n  width: 100%;\n  position: relative;\n}\n.upload-container[data-v-45f4a5d9]:after {\n    content: "";\n    display: table;\n    clear: both;\n}\n.upload-container .image-uploader[data-v-45f4a5d9] {\n    width: 35%;\n    float: left;\n}\n.upload-container .image-preview[data-v-45f4a5d9] {\n    width: 200px;\n    height: 200px;\n    position: relative;\n    border: 1px dashed #d9d9d9;\n    float: left;\n    margin-left: 50px;\n}\n.upload-container .image-preview .image-preview-wrapper[data-v-45f4a5d9] {\n      position: relative;\n      width: 100%;\n      height: 100%;\n}\n.upload-container .image-preview .image-preview-wrapper img[data-v-45f4a5d9] {\n        width: 100%;\n        height: 100%;\n}\n.upload-container .image-preview .image-preview-action[data-v-45f4a5d9] {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      cursor: default;\n      text-align: center;\n      color: #fff;\n      opacity: 0;\n      font-size: 20px;\n      background-color: rgba(0, 0, 0, 0.5);\n      -webkit-transition: opacity .3s;\n      transition: opacity .3s;\n      cursor: pointer;\n      text-align: center;\n      line-height: 200px;\n}\n.upload-container .image-preview .image-preview-action .el-icon-delete[data-v-45f4a5d9] {\n        font-size: 36px;\n}\n.upload-container .image-preview:hover .image-preview-action[data-v-45f4a5d9] {\n      opacity: 1;\n}\n.upload-container .image-app-preview[data-v-45f4a5d9] {\n    width: 320px;\n    height: 180px;\n    position: relative;\n    border: 1px dashed #d9d9d9;\n    float: left;\n    margin-left: 50px;\n}\n.upload-container .image-app-preview .app-fake-conver[data-v-45f4a5d9] {\n      height: 44px;\n      position: absolute;\n      width: 100%;\n      text-align: center;\n      line-height: 64px;\n      color: #fff;\n}\n',""])},UYZE:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'\n.createPost-container[data-v-12969c76] {\n  position: relative;\n}\n.createPost-container .createPost-main-container[data-v-12969c76] {\n    padding: 40px 45px 20px 50px;\n}\n.createPost-container .createPost-main-container .postInfo-container[data-v-12969c76] {\n      position: relative;\n      margin-bottom: 10px;\n}\n.createPost-container .createPost-main-container .postInfo-container[data-v-12969c76]:after {\n        content: "";\n        display: table;\n        clear: both;\n}\n.createPost-container .createPost-main-container .postInfo-container .postInfo-container-item[data-v-12969c76] {\n        float: left;\n}\n.createPost-container .createPost-main-container .editor-container[data-v-12969c76] {\n      min-height: 500px;\n      margin: 0 0 30px;\n}\n.createPost-container .createPost-main-container .editor-container .editor-upload-btn-container[data-v-12969c76] {\n        text-align: right;\n        margin-right: 10px;\n}\n.createPost-container .createPost-main-container .editor-container .editor-upload-btn-container .editor-upload-btn[data-v-12969c76] {\n          display: inline-block;\n}\n.createPost-container .word-counter[data-v-12969c76] {\n    width: 40px;\n    position: absolute;\n    right: -10px;\n    top: 0px;\n}\n.tip[data-v-12969c76] {\n  color: #ccc;\n  font-size: 10px;\n  padding-left: 5px;\n}\n',""])},VNF6:function(t,e,a){"use strict";var n=a("woOf"),i=a.n(n),o=a("5aCZ"),r=a("//Fk"),s=a.n(r),c=a("EX+S"),l={name:"singleImageUpload3",props:{value:String},computed:{imageUrl:function(){return this.value}},data:function(){return{tempUrl:"",dataObj:{token:"",key:""}}},methods:{rmImage:function(){this.emitInput("")},emitInput:function(t){this.$emit("input",t)},handleImageScucess:function(t,e){this.emitInput(this.tempUrl)},beforeUpload:function(){var t=this,e=this;return new s.a(function(a,n){Object(c.a)().then(function(n){var i=n.data.qiniu_key,o=n.data.qiniu_token;e._data.dataObj.token=o,e._data.dataObj.key=i,t.tempUrl=n.data.qiniu_url,a(!0)}).catch(function(t){console.log(t),n(!1)})})}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-container"},[a("el-upload",{staticClass:"image-uploader",attrs:{data:t.dataObj,drag:"",multiple:!1,"show-file-list":!1,action:"https://upload-z2.qiniup.com","on-success":t.handleImageScucess,"before-upload":t.beforeUpload}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])]),t._v(" "),a("div",{staticClass:"image-preview image-app-preview"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl.length>1,expression:"imageUrl.length>1"}],staticClass:"image-preview-wrapper"},[a("img",{attrs:{src:t.imageUrl}}),t._v(" "),a("div",{staticClass:"image-preview-action"},[a("i",{staticClass:"el-icon-delete",on:{click:t.rmImage}})])])]),t._v(" "),a("div",{staticClass:"image-preview"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl.length>1,expression:"imageUrl.length>1"}],staticClass:"image-preview-wrapper"},[a("img",{attrs:{src:t.imageUrl}}),t._v(" "),a("div",{staticClass:"image-preview-action"},[a("i",{staticClass:"el-icon-delete",on:{click:t.rmImage}})])])])],1)},staticRenderFns:[]};var d=a("VU/8")(l,p,!1,function(t){a("3KJw")},"data-v-45f4a5d9",null).exports,m=a("vHhr"),u=a("7Dmp"),f={status:1,name:"",data_from:0,tuijian:0,cate_id:0,id:void 0,sort:0},v={name:"itemDetail",components:{Tinymce:o.a,Upload:d,Sticky:m.a},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this;return{postForm:i()({},f),loading:!1,cateOptions:[],rules:{title:[{validator:function(e,a,n){""===a?(t.$message({message:e.field+"为必传项",type:"error"}),n(null)):n()}}]}}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.fetchData(t)}else this.postForm=i()({},f);this.getAllCates()},methods:{fetchData:function(t){var e=this;Object(u.c)(t).then(function(t){e.postForm=t.data}).catch(function(t){console.log(t)})},getAllCates:function(){var t=this;Object(u.d)().then(function(e){t.cateOptions=e.data})},submitForm:function(){var t=this;this.$refs.postForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.isEdit?Object(u.f)(t.postForm,t.postForm.id).then(function(e){0==e.data.code?t.$notify({title:"成功",message:e.data.message,type:"success",duration:2e3}):t.$notify({title:"失败",message:e.data.error,type:"error",duration:2e3})}):(Object(u.a)(t.postForm).then(function(e){0==e.data.code?t.$notify({title:"成功",message:e.data.message,type:"success",duration:2e3}):t.$notify({title:"失败",message:e.data.error,type:"error",duration:2e3})}),t.$router.push("/products/product-cate")),t.loading=!1})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"postForm",attrs:{model:t.postForm,rules:t.rules,size:"small","label-width":"130px"}},[a("sticky",{attrs:{className:"sub-navbar draft"}},[a("router-link",{attrs:{to:"/products/product-cate"}},[a("el-button",{staticStyle:{margin:"10px","margin-bottom":"0"},attrs:{type:"primary",icon:"el-icon-back"}},[t._v("返回列表")])],1),t._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{margin:"10px",float:"right","margin-bottom":"0"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v("保存")])],1),t._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-col",{attrs:{span:8}},[a("el-input",{model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"对应分类"}},[a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.postForm.cate_id,callback:function(e){t.$set(t.postForm,"cate_id",e)},expression:"postForm.cate_id"}},t._l(t.cateOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"值越大越靠前"},model:{value:t.postForm.sort,callback:function(e){t.$set(t.postForm,"sort",e)},expression:"postForm.sort"}})],1)],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(v,g,!1,function(t){a("yiVB")},"data-v-12969c76",null);e.a=h.exports},yiVB:function(t,e,a){var n=a("UYZE");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("0aefa808",n,!0)}});