webpackJsonp([26],{"93dX":function(e,t,a){"use strict";t.c=function(e){return Object(s.a)({url:"/aliaccBill",method:"get",params:e})},t.b=function(e,t){return Object(s.a)({url:"/aliaccBill/"+e,method:"put",params:t})},t.d=function(){return Object(s.a)({url:"/aliaccBill/1",method:"put",data:{type:3}})},t.a=function(e,t){return Object(s.a)({url:"/alipayBill/"+e,method:"put",params:t})};var s=a("FE1k")},H9kG:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\ninput[data-v-fea31544] {\n  padding: 0 10px;\n}\n.tit[data-v-fea31544] {\n  position: relative;\n  top: 20px;\n  padding: 0 0 0 15px;\n}\n.tit .r_box[data-v-fea31544] {\n    min-width: 900px;\n}\n.tit .r_box li[data-v-fea31544] {\n      float: left;\n      margin-right: 10px;\n}\n.main .tab_foot .shanshu[data-v-fea31544] {\n  display: inline-block;\n  margin-left: 10px;\n}\n.main .tab_foot .block[data-v-fea31544] {\n  float: right;\n  margin: 30px 60px 0 0;\n}\n",""])},KL2c:function(e,t,a){var s=a("H9kG");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("75031fdc",s,!0)},VgJT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("0xDb"),l=a("y3oj"),i=a("93dX"),r=a("TIfe"),n=[{value:"",label:"全部"},{value:"6",label:"待审核"},{value:"7",label:"已审核"}],o={name:"UserReceiptsDetails",data:function(){return{headerObj:{},fileList:[],userlist:[],userlistLoading:!1,total:0,shOptions:n,ifUserReceipts:!1,UserReceipts:{id:"",je:"",hym:"",rq:""},searchuserQuery:{dataval:"",shvalue:"",telval:"",alipaylistval:"",usernameval:"",search:"",searchFields:""},listQuery:{page:1,limit:10,time:"",mobile:"",status:"",bill_num:"",user:""}}},created:function(){this.getUserList();var e=Object(r.c)();this.headerObj={Authorization:e}},methods:{beforeAvatarUpload:function(e){var t="xls"===e.name.split(".")[1],a="xlsx"===e.name.split(".")[1],s="csv"===e.name.split(".")[1];t||a||s||this.$message.error("上传文件只能是xls,xlsx,csv格式!")},AvatarUploadSuccess:function(e,t,a){-1==t.response.code&&this.$message({type:"success",message:t.msg,duration:2e3}),200==t.response.code&&(this.$message({type:"success",message:t.name+"报表导入成功!",duration:2e3}),this.getUserList())},AvatarUploadError:function(e,t,a){},getUserList:function(){var e=this;this.userlistLoading=!0,Object(l.f)(this.listQuery).then(function(t){if(200==t.data.code&&""!==t.data.data.data){e.userlist=t.data.data.items,e.total=t.data.data.total;for(var a=0;a<e.userlist.length;a++)e.userlist[a].index=(1!=t.data.data.currentPage?10*t.data.data.currentPage-9:1)+a,null!==e.userlist[a].dotime&&(e.userlist[a].dotime=Object(s.f)(e.userlist[a].dotime)),null!==e.userlist[a].pay_time&&(e.userlist[a].pay_time=Object(s.f)(e.userlist[a].pay_time)),1==e.userlist[a].status&&(e.userlist[a].status="已通过"),0==e.userlist[a].status&&(e.userlist[a].status="未通过")}e.userlistLoading=!1})},handleCurrentChange:function(e){this.listQuery.page=e,this.getUserList()},tongguo:function(e,t){this.UserReceipts.rq="",this.UserReceipts.hym="",this.UserReceipts.je=t.amount,this.UserReceipts.id=t.id},handleClose:function(e){this.$confirm("确认关闭弹出窗口？").then(function(t){e()}).catch(function(e){})},ifUserReceiptsTrue:function(){var e=this;if(""!=this.UserReceipts.hym&&""!=this.UserReceipts.rq){var t={status:1,time:this.UserReceipts.rq+"-20",user:this.UserReceipts.hym,amount:this.UserReceipts.je};Object(i.a)(this.UserReceipts.id,t).then(function(t){200==t.data.code?(e.$message({type:"success",message:"操作成功"}),e.ifUserReceipts=!1,e.getUserList()):e.$message({type:"error",message:t.data.msg,duration:1e3})})}else this.$message({type:"error",message:"请输入会员名或选择会员账期日期",duration:1e3})},searchuser:function(){this.listQuery.time=this.searchuserQuery.dataval,this.listQuery.mobile=this.searchuserQuery.telval,this.listQuery.status=this.searchuserQuery.shvalue,this.listQuery.bill_num=this.searchuserQuery.alipaylistval,this.listQuery.user=this.searchuserQuery.usernameval,this.getUserList()}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticClass:"tit"},[a("div",{staticClass:"r_box"},[a("ul",[a("li",[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[e._v("月结日期：")]),e._v(" "),a("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"month",placeholder:"选择日期时间",size:"small","value-format":"yyyy-MM"},model:{value:e.searchuserQuery.dataval,callback:function(t){e.$set(e.searchuserQuery,"dataval",t)},expression:"searchuserQuery.dataval"}})],1)]),e._v(" "),a("li",[a("el-select",{staticClass:"item-choose",staticStyle:{width:"105px"},attrs:{size:"small",clearable:"",placeholder:"审核状态"},model:{value:e.searchuserQuery.shvalue,callback:function(t){e.$set(e.searchuserQuery,"shvalue",t)},expression:"searchuserQuery.shvalue"}},e._l(e.shOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("li",[e._v("\r\n          手机号\r\n          :\r\n          "),a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",size:"small",placeholder:"请输入手机号"},model:{value:e.searchuserQuery.telval,callback:function(t){e.$set(e.searchuserQuery,"telval",t)},expression:"searchuserQuery.telval"}})],1),e._v(" "),a("li",[e._v("\r\n          支付宝订单号\r\n          :\r\n          "),a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",size:"small",placeholder:"请输入支付宝订单号"},model:{value:e.searchuserQuery.alipaylistval,callback:function(t){e.$set(e.searchuserQuery,"alipaylistval",t)},expression:"searchuserQuery.alipaylistval"}})],1),e._v(" "),a("li",[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",size:"small",placeholder:"请输入会员名"},model:{value:e.searchuserQuery.usernameval,callback:function(t){e.$set(e.searchuserQuery,"usernameval",t)},expression:"searchuserQuery.usernameval"}})],1),e._v(" "),a("li",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.searchuser}},[e._v("查询")])],1),e._v(" "),a("li",[a("el-upload",{ref:"upload",staticClass:"upload-file",attrs:{name:"thef",multiple:!1,action:"https://other.aikbao.com/admin/v1/baobiao","before-upload":e.beforeAvatarUpload,"on-success":e.AvatarUploadSuccess,"on-error":e.AvatarUploadError,"file-list":e.fileList,"show-file-list":!1,headers:e.headerObj,"auto-upload":!0}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v("导入会员账期明细")])],1)],1)])])]),e._v(" "),a("el-main",{staticClass:"main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.userlistLoading,expression:"userlistLoading"}],staticStyle:{"text-align":"center"},attrs:{border:"",size:"small",data:e.userlist,"highlight-current-row":"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"序号",width:"60",prop:"index"}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"月结日期","min-width":"72"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ddusername",label:"会员名","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bill_num",label:"支付宝订单号","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"支付宝转账金额","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"支付宝备注","min-width":"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pay_time",label:"支付宝打款时间","min-width":"122"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realname",label:"支付宝姓名","min-width":"85"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"receivable",label:"应收金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"already_money",label:"已收金额","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"re_money",label:"未收金额","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核状态","min-width":"70"}}),e._v(" "),a("el-table-column",{attrs:{prop:"admin",label:"操作人","min-width":"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dotime",label:"操作时间","min-width":"85"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},["已通过"!==t.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.tongguo(t.$index,t.row),e.ifUserReceipts=!0}}},[e._v("通过")]):e._e()],1)}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"请核实该会员是否已全部打款",visible:e.ifUserReceipts,width:"300px","before-close":e.handleClose},on:{"update:visible":function(t){e.ifUserReceipts=t}}},[a("p",{staticStyle:{margin:"-5px 0 10px 0"}},[e._v("￥"),a("span",{domProps:{textContent:e._s(e.UserReceipts.je)}})]),e._v(" "),a("el-input",{staticStyle:{width:"220px",margin:"0px 0 15px 0"},attrs:{clearable:"",placeholder:"请输入会员名"},model:{value:e.UserReceipts.hym,callback:function(t){e.$set(e.UserReceipts,"hym",t)},expression:"UserReceipts.hym"}}),e._v(" "),a("el-date-picker",{attrs:{type:"month",placeholder:"选择日期时间","value-format":"yyyy-MM"},model:{value:e.UserReceipts.rq,callback:function(t){e.$set(e.UserReceipts,"rq",t)},expression:"UserReceipts.rq"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.ifUserReceiptsTrue}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.ifUserReceipts=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("div",{staticClass:"tab_foot"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-size":e.listQuery.limit,layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,u,!1,function(e){a("KL2c")},"data-v-fea31544",null);t.default=c.exports}});