webpackJsonp([24],{"8FEM":function(t,a,i){(t.exports=i("FZ+f")(!1)).push([t.i,'\n.createPost-container[data-v-514ef1bb] {\n  position: relative;\n}\n.createPost-container .createPost-main-container[data-v-514ef1bb] {\n    padding: 40px 45px 20px 50px;\n}\n.createPost-container .createPost-main-container .postInfo-container[data-v-514ef1bb] {\n      position: relative;\n      margin-bottom: 10px;\n}\n.createPost-container .createPost-main-container .postInfo-container[data-v-514ef1bb]:after {\n        content: "";\n        display: table;\n        clear: both;\n}\n.createPost-container .createPost-main-container .postInfo-container .postInfo-container-item[data-v-514ef1bb] {\n        float: left;\n}\n.createPost-container .createPost-main-container .editor-container[data-v-514ef1bb] {\n      min-height: 500px;\n      margin: 0 0 30px;\n}\n.createPost-container .createPost-main-container .editor-container .editor-upload-btn-container[data-v-514ef1bb] {\n        text-align: right;\n        margin-right: 10px;\n}\n.createPost-container .createPost-main-container .editor-container .editor-upload-btn-container .editor-upload-btn[data-v-514ef1bb] {\n          display: inline-block;\n}\n.createPost-container .word-counter[data-v-514ef1bb] {\n    width: 40px;\n    position: absolute;\n    right: -10px;\n    top: 0px;\n}\n.tip[data-v-514ef1bb] {\n  color: #ccc;\n  font-size: 10px;\n  padding-left: 5px;\n}\n.txt_r[data-v-514ef1bb] {\n  text-align: right;\n}\n.list-items[data-v-514ef1bb] {\n  width: 100%;\n  clear: both;\n  padding: 0 10px;\n  border-top: 1px solid #eee;\n}\n.list-items .detail-item[data-v-514ef1bb] {\n  border-bottom: 1px solid #eee;\n  width: 100%;\n  padding-bottom: 5px;\n  padding-top: 5px;\n  clear: both;\n}\n.list-add[data-v-514ef1bb] {\n  float: right;\n  margin-top: -5px;\n}\n',""])},nlxB:function(t,a,i){var e=i("8FEM");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i("rjj0")("250e49a2",e,!0)},nmaY:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=i("BO1k"),o=i.n(e),n=i("woOf"),r=i.n(n),l=i("5aCZ"),s=i("e9xc"),p=i("vHhr"),c=i("yigf"),d={id:5,if_show:1,application:[]},m={id:void 0,title:"",img:"",url:""},f={name:"logosDetail",components:{Tinymce:l.a,Sticky:p.a,Upload:s.a},data:function(){return{postForm:r()({},d),applicationForm:r()({},m),loading:!1,dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑",create:"创建"},rules:{application:[{type:"array",required:!0,message:"数据必须在1-20个之间",min:1,max:20,trigger:"change"}]},applicationRules:{img:[{required:!0,message:"请上传LOGO",trigger:"change"}]}}},created:function(){this.fetchData(d.id)},methods:{fetchData:function(t){var a=this;Object(c.a)(t).then(function(t){console.log("this.postForm",t.data),a.postForm=t.data;for(var i=a.postForm.application.length-1;i>=0;i--)a.postForm.application[i]=JSON.parse(a.postForm.application[i])}).catch(function(t){console.log(t)})},submitForm:function(){var t=this;this.$refs.postForm.validate(function(a){if(!a)return console.log("error submit!!"),!1;t.loading=!0;var i=r()({},t.postForm);Object(c.b)(i,i.id).then(function(a){200==a.data.code?t.$notify({title:"成功",message:a.data.message,type:"success",duration:2e3}):t.$notify({title:"失败",message:a.data.error,type:"error",duration:2e3})}),t.$router.push("/homeset/logos"),t.loading=!1})},handleCreate:function(){var t=this;this.applicationForm=r()({},m),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.applicationForm.clearValidate()})},createData:function(){var t=this;this.postForm.application.length>20&&(this.$message("最多只能上传20个"),this.dialogFormVisible=!1),this.$refs.applicationForm.validate(function(a){a&&(t.applicationForm.id=t.postForm.application.length+1,t.postForm.application.push(t.applicationForm),t.dialogFormVisible=!1)})},handleUpdate:function(t){var a=this;this.applicationForm=r()({},t),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){a.$refs.applicationForm.clearValidate()})},updateData:function(){var t=this;this.$refs.applicationForm.validate(function(a){if(a){var i=!0,e=!1,n=void 0;try{for(var r,l=o()(t.postForm.application);!(i=(r=l.next()).done);i=!0){var s=r.value;if(s.id===t.applicationForm.id){var p=t.postForm.application.indexOf(s);t.postForm.application.splice(p,1,t.applicationForm);break}}}catch(t){e=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(e)throw n}}t.dialogFormVisible=!1}})},deleteData:function(t){var a=this.postForm.application.indexOf(t);this.postForm.application.splice(a,1)}}},u={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"postForm",attrs:{model:t.postForm,rules:t.rules,size:"small","label-width":"130px"}},[i("sticky",{attrs:{className:"sub-navbar draft"}},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{margin:"10px",float:"right","margin-bottom":"0"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v("保存")])],1),t._v(" "),i("h2",[t._v("首页LOGO墙设置")]),t._v(" "),i("div",{staticStyle:{clear:"both",height:"100px","line-height":"100px"}}),t._v(" "),i("el-form-item",{attrs:{label:"LOGO设置",prop:"application"}},[i("div",{staticClass:"list-add"},[i("el-button",{attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("添加LOGO")])],1),t._v(" "),i("div",{staticClass:"list-items"},[i("ul",t._l(t.postForm.application,function(a,e){return i("li",{staticClass:"detail-item"},[i("el-col",{staticStyle:{"padding-right":"5px","text-align":"right","line-height":"70px",color:"#606266"},attrs:{span:2}},[i("b",[t._v("第"+t._s(e+1)+"个:")])]),t._v(" "),i("el-col",{staticStyle:{"padding-left":"5px","padding-right":"5px","padding-top":"15px"},attrs:{span:10}},[i("b",{staticStyle:{color:"gray"},domProps:{innerHTML:t._s(a.title)}}),t._v(" "),""!==a.url?i("a",{staticStyle:{color:"blue"},attrs:{href:a.url,target:"_blank"}},[t._v(" 链接 ")]):t._e()]),t._v(" "),i("el-col",{attrs:{span:6}},[i("img",{staticStyle:{float:"left","margin-left":"5px"},attrs:{src:a.img,width:"auto",height:"80"}})]),t._v(" "),i("el-col",{staticStyle:{"padding-top":"20px"},attrs:{span:6}},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){t.handleUpdate(a)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){t.deleteData(a)}}},[t._v("删除")])],1),t._v(" "),i("div",{staticStyle:{clear:"both",width:"100%",height:"0"}})],1)}))])]),t._v(" "),i("el-form-item",{attrs:{label:"首页展示"}},[i("el-radio-group",{model:{value:t.postForm.if_show,callback:function(a){t.$set(t.postForm,"if_show",a)},expression:"postForm.if_show"}},[i("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1)],1),t._v(" "),i("el-dialog",{staticClass:"application",attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"60%"},on:{"update:visible":function(a){t.dialogFormVisible=a}}},[i("el-form",{ref:"applicationForm",attrs:{model:t.applicationForm,rules:t.applicationRules,size:"small"}},[i("el-form-item",{attrs:{label:"名称",prop:"title"}},[i("el-col",{attrs:{span:8}},[i("el-input",{model:{value:t.applicationForm.title,callback:function(a){t.$set(t.applicationForm,"title",a)},expression:"applicationForm.title"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"链接",prop:"url"}},[i("el-col",{attrs:{span:8}},[i("el-input",{model:{value:t.applicationForm.url,callback:function(a){t.$set(t.applicationForm,"url",a)},expression:"applicationForm.url"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"图片",prop:"img"}},[i("el-col",{attrs:{span:10}},[i("Upload",{model:{value:t.applicationForm.img,callback:function(a){t.$set(t.applicationForm,"img",a)},expression:"applicationForm.img"}})],1),t._v(" "),i("span",{staticStyle:{color:"red"}},[t._v(" [必填,固定尺寸：宽561px*高247px，格式JPG，PNG]")])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(a){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"==t.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("添加")]):i("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("更新")])],1)],1)],1)},staticRenderFns:[]};var b=i("VU/8")(f,u,!1,function(t){i("nlxB")},"data-v-514ef1bb",null);a.default=b.exports}});