webpackJsonp([3],{"2ZMA":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"\n.upload-container{\n  width: 100%; clear: both;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  position: relative;\n  width: 157px;\n  height: 157px;\n  float: left;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.upload-container .el-upload .el-upload-dragger{\n  width: auto; height: auto;\n}\n.el-upload-list{float: left;\n}\n.avatar {\n  min-width: 500px;\n  min-height: 500px;\n}\n",""])},GbLV:function(t,e,n){var a=n("qxGe");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("12a6f90b",a,!0)},OdCX:function(t,e,n){var a=n("2ZMA");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("a2811f3c",a,!0)},c05w:function(t,e,n){var a=n("fjvG");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("61e06e0a",a,!0)},f7rO:function(t,e,n){"use strict";var a=n("woOf"),i=n.n(a),o=n("5aCZ"),r=n("//Fk"),s=n.n(r),l=n("EX+S"),c={name:"singleImageUpload",props:{value:String},computed:{imageUrl:function(){return this.value}},data:function(){return{tempUrl:"",dataObj:{token:"",key:""}}},methods:{rmImage:function(){this.emitInput("")},emitInput:function(t){this.$emit("input",t)},handleImageScucess:function(){this.emitInput(this.tempUrl)},beforeUpload:function(){var t=this,e=this;return new s.a(function(n,a){Object(l.a)().then(function(a){var i=a.data.qiniu_key,o=a.data.qiniu_token;e._data.dataObj.token=o,e._data.dataObj.key=i,t.tempUrl=a.data.qiniu_url,n(!0)}).catch(function(t){console.log(t),a(!1)})})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-upload",{staticClass:"image-uploader",attrs:{data:t.dataObj,drag:"",multiple:!1,"show-file-list":!1,action:"https://upload-z2.qiniup.com","on-success":t.handleImageScucess,"before-upload":t.beforeUpload}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])])]),t._v(" "),n("div",{staticClass:"image-preview"},[n("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.imageUrl&&t.imageUrl.length>1,expression:"imageUrl!==null && imageUrl.length>1"}],staticClass:"image-preview-wrapper"},[n("img",{attrs:{src:t.imageUrl+"?imageView2/1/w/200/h/200"}}),t._v(" "),n("div",{staticClass:"image-preview-action"},[n("i",{staticClass:"el-icon-delete",on:{click:t.rmImage}})])])])],1)},staticRenderFns:[]};var u=n("VU/8")(c,d,!1,function(t){n("c05w")},"data-v-8c55c548",null).exports,p=n("vHhr"),m=n("fZjL"),f=n.n(m),h={name:"mutiSlideUpload",props:{imgs:{type:Array,default:function(){return[]}}},computed:{fileList:function(){var t=[];if(this.imgs.length>0)for(var e=0,n=this.imgs.length;e<n;e++)t[e]={url:this.imgs[e]};return t}},data:function(){return{zoomVisible:!1,zoomImageUrl:"",dataObj:{token:"",key:"",url:""}}},methods:{handlePictureCardPreview:function(t){this.zoomImageUrl=t.url,this.zoomVisible=!0},handleSuccess:function(t,e){for(var n=this,a=e.uid,i=f()(this.fileList),o=0,r=i.length;o<r;o++)if(this.fileList[i[o]].uid===a){this.fileList[i[o]].url=this.dataObj.url,this.fileList[i[o]].hasSuccess=!0;var s=f()(this.fileList).map(function(t){return n.fileList[t].url});return this.$emit("successCBK",s),void(this.zoomVisible=!1)}},handleRemove:function(t){for(var e=this,n=t.uid,a=f()(this.fileList),i=0,o=a.length;i<o;i++)if(this.fileList[a[i]].uid===n){delete this.fileList[a[i]];var r=f()(this.fileList).map(function(t){return e.fileList[t].url});return void this.$emit("successCBK",r)}},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,a=this.fileList.length;return this.fileList[a]={},new s.a(function(i,o){Object(l.a)().then(function(o){var r=new Image;r.src=n.createObjectURL(t);var s=o.data.qiniu_key,l=o.data.qiniu_token,c=o.data.qiniu_url;e._data.dataObj.token=l,e._data.dataObj.key=s,e._data.dataObj.url=c,r.onload=function(){e.fileList[a]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},i(!0)}).catch(function(t){console.log(t),o(!1)})})}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-upload",{staticClass:"avatar-uploader el-upload",attrs:{action:"https://upload-z2.qiniup.com","list-type":"picture-card",data:t.dataObj,"file-list":t.fileList,"show-file-list":!0,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload}},[n("i",{staticClass:"el-icon-plus"})]),t._v(" "),n("el-dialog",{attrs:{visible:t.zoomVisible},on:{"update:visible":function(e){t.zoomVisible=e}}},[n("img",{staticClass:"zoom",attrs:{width:"100%",src:t.zoomImageUrl}})])],1)},staticRenderFns:[]};var g=n("VU/8")(h,v,!1,function(t){n("OdCX")},null,null).exports,b=n("7uvm"),w={name:"",name_attr:"",content:"",id:void 0},x={name:"itemDetail",components:{Tinymce:o.a,Upload:u,Sticky:p.a,Mupload:g},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,n,a){""===n?(t.$message({message:e.field+"为必传项",type:"error"}),a(null)):a()};return{postForm:i()({},w),loading:!1,cateOptions:[],rules:{name:[{validator:e}],info:[{validator:e}],index_img:[{validator:e}]}}},computed:{contentShortLength:function(){return null==this.postForm.info?0:this.postForm.info.length}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.fetchData(t)}else this.postForm=i()({},w)},methods:{fetchData:function(t){var e=this;Object(b.c)(t).then(function(t){e.postForm=t.data}).catch(function(t){console.log(t)})},submitForm:function(){var t=this;this.$refs.postForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.isEdit?Object(b.e)(t.postForm,t.postForm.id).then(function(){t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})}):Object(b.a)(t.postForm).then(function(){t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})}),t.$router.push("/webset/news-list"),t.loading=!1})}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"createPost-container"},[n("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm,rules:t.rules}},[n("sticky",{attrs:{className:"sub-navbar draft"}},[n("router-link",{attrs:{to:"/webset/news-list"}},[n("el-button",{staticStyle:{margin:"10px","margin-bottom":"0"},attrs:{type:"primary",icon:"el-icon-back"}},[t._v("返回列表")])],1),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{margin:"10px",float:"right","margin-bottom":"0"},attrs:{type:"success"},on:{click:t.submitForm}},[t._v("发布")])],1),t._v(" "),n("div",{staticClass:"createPost-main-container"},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{model:{value:t.postForm.name,callback:function(e){t.$set(t.postForm,"name",e)},expression:"postForm.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"别名",prop:"name_attr"}},[n("el-input",{model:{value:t.postForm.name_attr,callback:function(e){t.$set(t.postForm,"name_attr",e)},expression:"postForm.name_attr"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("div",{staticClass:"editor-container"},[n("Tinymce",{ref:"editor",attrs:{height:400},model:{value:t.postForm.content,callback:function(e){t.$set(t.postForm,"content",e)},expression:"postForm.content"}})],1)])],1)],1)],1)},staticRenderFns:[]};var y=n("VU/8")(x,_,!1,function(t){n("GbLV")},"data-v-579c571a",null);e.a=y.exports},fjvG:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,'\n.upload-container[data-v-8c55c548] {\n  width: 100%;\n  position: relative;\n}\n.upload-container[data-v-8c55c548]:after {\n    content: "";\n    display: table;\n    clear: both;\n}\n.upload-container .image-uploader[data-v-8c55c548] {\n    width: 60%;\n    float: left;\n}\n.upload-container .image-preview[data-v-8c55c548] {\n    width: 200px;\n    height: 200px;\n    position: relative;\n    border: 1px dashed #d9d9d9;\n    float: left;\n    margin-left: 50px;\n}\n.upload-container .image-preview .image-preview-wrapper[data-v-8c55c548] {\n      position: relative;\n      width: 100%;\n      height: 100%;\n}\n.upload-container .image-preview .image-preview-wrapper img[data-v-8c55c548] {\n        width: 100%;\n        height: 100%;\n}\n.upload-container .image-preview .image-preview-action[data-v-8c55c548] {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      left: 0;\n      top: 0;\n      cursor: default;\n      text-align: center;\n      color: #fff;\n      opacity: 0;\n      font-size: 20px;\n      background-color: rgba(0, 0, 0, 0.5);\n      -webkit-transition: opacity .3s;\n      transition: opacity .3s;\n      cursor: pointer;\n      text-align: center;\n      line-height: 200px;\n}\n.upload-container .image-preview .image-preview-action .el-icon-delete[data-v-8c55c548] {\n        font-size: 36px;\n}\n.upload-container .image-preview:hover .image-preview-action[data-v-8c55c548] {\n      opacity: 1;\n}\n',""])},"ji+N":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"editForm",components:{ItemDetail:n("f7rO").a}},i={render:function(){var t=this.$createElement;return(this._self._c||t)("item-detail",{attrs:{"is-edit":!0}})},staticRenderFns:[]},o=n("VU/8")(a,i,!1,null,null,null);e.default=o.exports},qxGe:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,'\n.createPost-container[data-v-579c571a] {\n  position: relative;\n}\n.createPost-container .createPost-main-container[data-v-579c571a] {\n    padding: 40px 45px 20px 50px;\n}\n.createPost-container .createPost-main-container .postInfo-container[data-v-579c571a] {\n      position: relative;\n      margin-bottom: 10px;\n}\n.createPost-container .createPost-main-container .postInfo-container[data-v-579c571a]:after {\n        content: "";\n        display: table;\n        clear: both;\n}\n.createPost-container .createPost-main-container .postInfo-container .postInfo-container-item[data-v-579c571a] {\n        float: left;\n}\n.createPost-container .createPost-main-container .editor-container[data-v-579c571a] {\n      min-height: 500px;\n      margin: 0 0 30px;\n}\n.createPost-container .createPost-main-container .editor-container .editor-upload-btn-container[data-v-579c571a] {\n        text-align: right;\n        margin-right: 10px;\n}\n.createPost-container .createPost-main-container .editor-container .editor-upload-btn-container .editor-upload-btn[data-v-579c571a] {\n          display: inline-block;\n}\n.createPost-container .word-counter[data-v-579c571a] {\n    width: 40px;\n    position: absolute;\n    right: -10px;\n    top: 0px;\n}\n',""])}});