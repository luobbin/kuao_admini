webpackJsonp([38],{SF2p:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("y3oj"),l=a("0xDb"),r=[{value:"",label:"全部"},{value:"0",label:"未授权"},{value:"1",label:"已授权"},{value:"2",label:"授权失效"}],i=[{value:"",label:"全部"},{value:"6",label:"待审核"},{value:"7",label:"已审核"},{value:"8",label:"驳回"}],n={name:"AliMMInformation",data:function(){return{valtong:!1,gaoyongid:"",gaoyongval:"",ifgaoyong:!1,userlist:[],userlistLoading:!1,sqOptions:r,shOptions:i,total:0,searchuserQuery:{sqvalue:"",shvalue:"",usernameval:""},listQuery:{page:1,limit:10,accreditStatus:"",status:""}}},computed:{},created:function(){this.getUserList()},methods:{getUserList:function(){var t=this;this.userlistLoading=!0,Object(s.b)(this.listQuery).then(function(e){if(200==e.data.code&&""!==e.data.data.items){t.userlist=e.data.data.items,t.total=e.data.data.total;for(var a=0;a<t.userlist.length;a++)t.userlist[a].index=(1!=e.data.data.currentPage?10*e.data.data.currentPage-9:1)+a,null!==t.userlist[a].time?Object(l.e)(t.userlist[a].time)+2505600>Object(l.e)(new Date)?t.userlist[a].AccountExec="已授权":Object(l.e)(t.userlist[a].time)+2505600<Object(l.e)(new Date)&&(t.userlist[a].AccountExec="授权失效"):t.userlist[a].AccountExec="未授权","未提交"!==t.userlist[a].pid?t.userlist[a].pidData="已获取":(t.userlist[a].AccountExec="未授权",t.userlist[a].pidData="未获取"),1==t.userlist[a].agreement?t.userlist[a].agreement="已签署":t.userlist[a].agreement="未签署",0==t.userlist[a].gy_status?t.userlist[a].gy_status="失效":1==t.userlist[a].gy_status&&(t.userlist[a].gy_status="正常"),null==t.userlist[a].status?t.userlist[a].status="":6==t.userlist[a].status?t.userlist[a].status="待审核":7==t.userlist[a].status||10==t.userlist[a].status||9==t.userlist[a].status?t.userlist[a].status="已审核":8==t.userlist[a].status&&(t.userlist[a].status="已驳回")}t.userlistLoading=!1})},handleCurrentChange:function(t){this.listQuery.page=t,this.getUserList()},tongguo:function(t,e){var a=this;this.$confirm("确认要通过该会员申请吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=0;if(2!==e.cardImg.length&&(t+=1),""!=e.idcard&&null!=e.idcard||(t+=1),""!=e.wechat&&null!=e.idcard||(t+=1),"未提交"!=e.pid&&null!=e.pid||(t+=1),""!=e.user.ddusername&&null!=e.user.ddusername||(t+=1),""!=e.mobile&&null!=e.mobile||(t+=1),""!=e.account&&null!=e.account||(t+=1),""!=e.laxin&&null!=e.laxin||(t+=1),"已签署"!==e.agreement&&(t+=1),"已授权"!==e.AccountExec&&(t+=1),""!=e.time&&null!=e.time||(t+=1),""!=e.time&&null!=e.time||(t+=1),"正常"!==e.gy_status&&(t+=1),"已获取"!==e.pidData&&(t+=1),2==e.cardImg.length&&""!==e.idcard&&""!==e.wechat&&null!==e.pid&&""!==e.user.ddusername&&""!==e.mobile&&""!==e.account&&""!==e.laxin&&"已签署"==e.agreement&&"已授权"==e.AccountExec&&""!==e.time&&"正常"==e.gy_status&&"已获取"==e.pidData){var l={pid:e.pid,status:7};Object(s.c)(e.id,l).then(function(t){200==t.status?(a.$message({type:"success",message:t.data.data}),a.getUserList()):a.$message({type:"error",message:"请求失败"})})}else a.$message({type:"error",message:t+"事件不合格，不允许通过!"})}).catch(function(){a.$message({type:"info",message:"操作取消!"})})},bohui:function(t,e){var a=this;this.$prompt("请输入驳回原因",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"内容不能为空"}).then(function(t){var l={refuse_reason:t.value};Object(s.c)(e.id,l).then(function(t){200==t.status?(a.$message({type:"success",message:t.data.data,duration:1500}),a.getUserList()):a.$message({type:"error",message:"请求失败"})})}).catch(function(){a.$message({type:"info",message:"操作已取消"})})},gaoyong:function(t,e){this.gaoyongval="",this.gaoyongid=this.userlist[t].id},handleClose:function(t){this.$confirm("确认关闭高俑状态设置？").then(function(e){t()}).catch(function(t){})},ifgaoyongFalse:function(){this.ifgaoyong=!1,this.$message({type:"info",message:"操作已取消"})},ifgaoyongTrue:function(){var t=this;""!==this.gaoyongval?(this.ifgaoyong=!1,this.gaoyongval={gy_status:this.gaoyongval},Object(s.c)(this.gaoyongid,this.gaoyongval).then(function(e){200==e.data.code&&(t.getUserList(),t.$message({type:"success",message:"操作成功"}))})):this.$message({type:"error",message:"请选择状态",duration:1500})},searchuser:function(){this.listQuery.user=this.searchuserQuery.usernameval,this.listQuery.accreditStatus=this.searchuserQuery.sqvalue,this.listQuery.status=this.searchuserQuery.shvalue,this.getUserList()}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"tit"},[a("div",{staticClass:"r_box"},[a("ul",[a("li",[a("el-select",{staticClass:"item-choose",staticStyle:{width:"125px"},attrs:{size:"small",clearable:"",placeholder:"授权状态"},model:{value:t.searchuserQuery.sqvalue,callback:function(e){t.$set(t.searchuserQuery,"sqvalue",e)},expression:"searchuserQuery.sqvalue"}},t._l(t.sqOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("li",[a("el-select",{staticClass:"item-choose",staticStyle:{width:"105px"},attrs:{size:"small",clearable:"",placeholder:"审核状态"},model:{value:t.searchuserQuery.shvalue,callback:function(e){t.$set(t.searchuserQuery,"shvalue",e)},expression:"searchuserQuery.shvalue"}},t._l(t.shOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("li",[a("el-input",{staticStyle:{width:"150px"},attrs:{clearable:"",size:"small",placeholder:"请输入会员名"},model:{value:t.searchuserQuery.usernameval,callback:function(e){t.$set(t.searchuserQuery,"usernameval",e)},expression:"searchuserQuery.usernameval"}})],1),t._v(" "),a("li",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.searchuser}},[t._v("查询")])],1)])])]),t._v(" "),a("el-main",{staticClass:"main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.userlistLoading,expression:"userlistLoading"}],staticStyle:{"text-align":"center"},attrs:{border:"",size:"small",data:t.userlist,"highlight-current-row":"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"序号",width:"45",prop:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user.ddusername",label:"会员名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号","min-width":"88"}}),t._v(" "),a("el-table-column",{attrs:{prop:"account",label:"阿里妈妈账号","min-width":"88"}}),t._v(" "),a("el-table-column",{attrs:{label:"身份证","min-width":"92"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right-start",width:"430",trigger:"click"}},[a("img",{staticStyle:{width:"400px",height:"auto"},attrs:{border:"0",src:e.row.cardImg[0],alt:"身份证"}}),t._v(" "),a("img",{staticStyle:{width:"32px",height:"auto"},attrs:{slot:"reference",border:"0",src:e.row.cardImg[0],alt:"身份证",title:"点击查看身份证大图"},slot:"reference"})]),t._v(" "),a("el-popover",{attrs:{placement:"right-start",width:"430",trigger:"click"}},[a("img",{staticStyle:{width:"400px",height:"auto"},attrs:{border:"0",src:e.row.cardImg[1],alt:"身份证"}}),t._v(" "),a("img",{staticStyle:{width:"32px",height:"auto"},attrs:{slot:"reference",border:"0",src:e.row.cardImg[1],alt:"身份证",title:"点击查看身份证大图"},slot:"reference"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"idcard",label:"身份证号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"wechat",label:"微信号"}}),t._v(" "),a("el-table-column",{attrs:{label:"拉新图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right-start",width:"430",trigger:"click"}},[a("img",{staticStyle:{width:"400px",height:"auto"},attrs:{border:"0",src:e.row.laxin,alt:"拉新图"}}),t._v(" "),a("img",{staticStyle:{width:"32px",height:"auto"},attrs:{slot:"reference",border:"0",src:e.row.laxin,alt:"拉新图",title:"点击查看拉新图大图"},slot:"reference"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"agreement",label:"合同签署"}}),t._v(" "),a("el-table-column",{attrs:{prop:"AccountExec",label:"授权状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"授权时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pid",label:"PID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pidData",label:"PID获取状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gy_status",label:"高佣状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"refuse_reason",label:"驳回原因"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return"已审核"!==e.row.status?a("div",{},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.tongguo(e.$index,e.row)}}},[t._v("通过")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.bohui(e.$index,e.row)}}},[t._v("驳回")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.gaoyong(e.$index,e.row),t.ifgaoyong=!0}}},[t._v("高佣状态设置")])],1):t._e()}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"高佣审核",visible:t.ifgaoyong,"before-close":t.handleClose},on:{"update:visible":function(e){t.ifgaoyong=e}}},[a("el-select",{attrs:{placeholder:"请审核高佣状态"},model:{value:t.gaoyongval,callback:function(e){t.gaoyongval=e},expression:"gaoyongval"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"失效",value:"0"}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.ifgaoyongFalse}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.ifgaoyongTrue}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{staticClass:"tab_foot"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-size":t.listQuery.limit,layout:"total,prev, pager, next, jumper ",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)])],1)],1)},staticRenderFns:[]};var u=a("VU/8")(n,o,!1,function(t){a("VaOp")},"data-v-adad1244",null);e.default=u.exports},VaOp:function(t,e,a){var s=a("tFv6");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("1fe7c06c",s,!0)},tFv6:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\ninput[data-v-adad1244] {\n  padding: 0 10px;\n}\n.tit[data-v-adad1244] {\n  position: relative;\n  top: 20px;\n  padding: 0 0 0 15px;\n}\n.tit .r_box[data-v-adad1244] {\n    min-width: 900px;\n}\n.tit .r_box li[data-v-adad1244] {\n      float: left;\n      margin-right: 10px;\n}\n.main .tab_foot .shanshu[data-v-adad1244] {\n  display: inline-block;\n  margin-left: 10px;\n}\n.main .tab_foot .block[data-v-adad1244] {\n  float: right;\n  margin: 30px 60px 0 0;\n}\n",""])}});