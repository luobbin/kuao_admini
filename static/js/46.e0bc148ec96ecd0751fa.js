webpackJsonp([46],{"CO+c":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),l=a.n(n),i=a("woOf"),s=a.n(i),r=a("FE1k");a("0xDb");var o=[],c={data:function(){return{fileList:[],tableKey:0,list:null,total:null,listLoading:!0,listQuery:{page:1,limit:10,searchJoin:"and",search:"",searchFields:"",filter:""},searchQuery:{search:"",searchFields:"",field:"",keyword:"",cid:""},oneQuery:{order:"",sub:""},mallsOptions:o,typeOptions:[{id:1,title:"成功"},{id:0,title:"未成功"}],multipleSelection:[],checkAll:0,isIndeterminate:!1}},created:function(){this.getTradeFalseList()},methods:{getTradeFalseList:function(){var e,t=this;this.listLoading=!0,(e=this.listQuery,Object(r.a)({url:"/trade_false/show",method:"get",params:e})).then(function(e){t.list=e.data.data,t.total=e.data.total,t.listLoading=!1})},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){},handlePreview:function(e){},handleMoney:function(e){var t,a=this;this.oneQuery.order=e.淘宝订单编号,this.oneQuery.sub=e.淘宝子订单编号,(t=this.oneQuery,Object(r.a)({url:"/trade_false/one",method:"get",params:t})).then(function(e){a.$message({type:"success",message:"执行成功！"}),a.getTradeFalseList(),a.listLoading=!1})},handleLot:function(){var e=this;Object(r.a)({url:"/trade_false/auto",method:"get"}).then(function(t){e.$message({type:"success",message:"批量执行成功！"}),e.getTradeFalseList(),e.listLoading=!1})},handleFilter:function(){var e=s()({},this.searchQuery),t=e.search,a=e.searchFields;e.keyword&&(t+="淘宝订单编号:"+e.keyword+";",a="淘宝订单编号:=;"),e.cid>=0&&(t="退款状态:"+e.cid+";",a="退款状态:=;"),this.listQuery.search=t,this.listQuery.searchFields=a,this.listQuery.page=1,this.getTradeFalseList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getTradeFalseList()},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e,this.multipleSelection.length==this.list.length?(this.checkAll=2,this.isIndeterminate=!0):this.multipleSelection.length>0?(this.checkAll=1,this.isIndeterminate=!0):(this.checkAll=0,this.isIndeterminate=!1)},handleDelete:function(){var e=this;if(this.multipleSelection.length<=0)return this.$notify({title:"警告",message:"请选择要删除的条目",type:"warning"}),!1;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var t="",a=!0,n=!1,i=void 0;try{for(var s,r=l()(e.multipleSelection);!(a=(s=r.next()).done);a=!0){var o=s.value;0==o.sys&&(t+=o.id+",")}}catch(e){n=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw i}}e.listLoading=!0,deleteData(t).then(function(t){e.$message({type:"success",message:t.data.message}),e.getTradeFalseList(),e.listLoading=!1})}).catch(function(){})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"app-container",attrs:{"element-loading-text":"Loading"}},[a("div",{staticClass:"filter-container",staticStyle:{"margin-bottom":"10px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"订单号"},model:{value:e.searchQuery.keyword,callback:function(t){e.$set(e.searchQuery,"keyword",t)},expression:"searchQuery.keyword"}}),e._v(" "),a("el-select",{staticStyle:{width:"105px"},attrs:{clearable:"",placeholder:"退款状态"},model:{value:e.searchQuery.cid,callback:function(t){e.$set(e.searchQuery,"cid",t)},expression:"searchQuery.cid"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("筛选")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(t){e.handleLot()}}},[e._v("点击批量处理订单")]),e._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{display:"inline","margin-left":"1rem"},attrs:{name:"thef",accept:"application/vnd.ms-excel",action:"https://other.xfz178.com/admin/v1/trade_false/upload","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",attrs:{size:"small",data:e.list,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"订单号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.淘宝订单编号)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"子订单号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.淘宝子订单编号)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"执行退款时间 ",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("parseTime")(t.row.addtime,"{y}-{m}-{d} {h}:{i}"))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"退款状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return 1==t.row.退款状态?[e._v("\n          成功\n        ")]:void 0}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.商品名称)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"维权金额 ",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.维权退款金额)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"返还佣金",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.应返还金额)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"维权状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.维权状态)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"addtime",label:"结算时间",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(e._f("parseTime")(t.row.订单结算时间,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"addtime",label:"创建时间",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(e._f("parseTime")(t.row.维权创建时间,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"addtime",label:"完成时间",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",[e._v(e._s(e._f("parseTime")(t.row.维权完成时间,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"operate",label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return 0==t.row.退款状态?[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleMoney(t.row)}}},[e._v("执行处理")])]:void 0}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[e.listQuery.limit],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("kw6b")},"data-v-646afef1",null);t.default=d.exports},Yyu2:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.pagination-container[data-v-646afef1]{\n  margin-top: 10px;\n}\n.el-pagination[data-v-646afef1]{\n  float: right;\n}\n\n\n",""])},kw6b:function(e,t,a){var n=a("Yyu2");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("44612aac",n,!0)}});